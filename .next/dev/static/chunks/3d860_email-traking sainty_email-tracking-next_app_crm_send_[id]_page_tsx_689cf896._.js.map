{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/app/crm/send/%5Bid%5D/page.tsx"],"sourcesContent":["// \"use client\";\n\n// import { useEffect, useState } from \"react\";\n// import { useParams } from \"next/navigation\";\n// import AuthGuard from \"@/components/AuthGuard\";\n// import { Card, CardContent } from \"@/components/ui/card\";\n// import { Eye, MousePointerClick, MailCheck } from \"lucide-react\";\n\n// interface EmailDetails {\n//   _id: string;\n//   to: string;\n//   subject: string;\n//   body: string;\n//   sentAt: string;\n//   opened: boolean;\n//   openCount: number;\n//   clickCount: number;\n// }\n\n// export default function EmailDetailsPage() {\n//   const { id } = useParams();\n\n//   const [email, setEmail] = useState<EmailDetails | null>(null);\n//   const [loading, setLoading] = useState(true);\n\n//   useEffect(() => {\n//     const fetchEmail = async () => {\n//       const res = await fetch(`/api/emails/${id}`, {\n//         headers: {\n//           Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n//         },\n//       });\n//       const data = await res.json();\n//       setEmail(data);\n//       setLoading(false);\n//     };\n//     if (id) fetchEmail();\n//   }, [id]);\n\n//   if (loading) {\n//     return (\n//       <div className=\"flex h-[60vh] items-center justify-center text-xl font-semibold text-muted-foreground\">\n//         Loading Email...\n//       </div>\n//     );\n//   }\n\n//   if (!email) return <p>Email not found</p>;\n\n//   return (\n//     <AuthGuard>\n//       <main className=\"p-6 md:p-10 max-w-6xl mx-auto space-y-8\">\n//         {/* Header */}\n//         <header>\n//           <h1 className=\"text-3xl font-bold tracking-tight\">Email Details</h1>\n//           <p className=\"text-muted-foreground\">\n//             Complete activity and message preview\n//           </p>\n//         </header>\n\n//         {/* Stats */}\n//         <section className=\"grid sm:grid-cols-2 lg:grid-cols-3 gap-4\">\n//           <StatCard\n//             title=\"Open Count\"\n//             value={email.openCount}\n//             icon={<Eye />}\n//             gradient=\"from-green-500 to-emerald-500\"\n//           />\n\n//           <StatCard\n//             title=\"Click Count\"\n//             value={email.clickCount}\n//             icon={<MousePointerClick />}\n//             gradient=\"from-pink-500 to-rose-500\"\n//           />\n\n//           <StatCard\n//             title=\"Delivery\"\n//             value=\"Sent\"\n//             icon={<MailCheck />}\n//             gradient=\"from-blue-500 to-indigo-500\"\n//           />\n//         </section>\n//         {/* Top Info Card */}\n//         <Card className=\"rounded-2xl shadow-sm\">\n//           <CardContent className=\"p-6 space-y-3\">\n//             <div className=\"grid md:grid-cols-2 gap-4 text-sm\">\n//               <Info label=\"Recipient\" value={email.to} />\n//               <Info label=\"Subject\" value={email.subject} />\n//               <Info\n//                 label=\"Sent At\"\n//                 value={new Date(email.sentAt).toLocaleString(\"en-IN\", {\n//                   day: \"2-digit\",\n//                   month: \"short\",\n//                   year: \"numeric\",\n//                   hour: \"2-digit\",\n//                   minute: \"2-digit\",\n//                   hour12: true,\n//                 })}\n//               />\n\n//               <div>\n//                 <p className=\"text-muted-foreground text-xs\">Status</p>\n\n//                 <span\n//                   className={`inline-block mt-1 px-3 py-1 rounded-full text-xs font-semibold ${\n//                     email.opened\n//                       ? \"bg-green-100 text-green-700\"\n//                       : \"bg-gray-200 text-gray-600\"\n//                   }`}\n//                 >\n//                   {email.opened ? \"Opened\" : \"Pending\"}\n//                 </span>\n//               </div>\n//             </div>\n//           </CardContent>\n//         </Card>\n\n//         {/* Email Preview */}\n//         <Card className=\"rounded-2xl shadow-sm\">\n//           <CardContent className=\"p-6\">\n//             <h2 className=\"text-lg font-semibold mb-4\">Email Preview</h2>\n\n//             <div className=\"border rounded-xl p-5 bg-muted/30 prose max-w-none\">\n//               <div dangerouslySetInnerHTML={{ __html: email.body }} />\n//             </div>\n//           </CardContent>\n//         </Card>\n//       </main>\n//     </AuthGuard>\n//   );\n// }\n\n// /* ---------------- Small Components ---------------- */\n\n// function Info({ label, value }: { label: string; value: string }) {\n//   return (\n//     <div>\n//       <p\n//         className=\"text-muted-foreground text-xs\"\n//         style={{ marginBottom: \"5px\" }}\n//       >\n//         {label}\n//       </p>\n//       <p className=\"font-medium\">{value}</p>\n//     </div>\n//   );\n// }\n\n// function StatCard({\n//   title,\n//   value,\n//   icon,\n//   gradient,\n// }: {\n//   title: string;\n//   value: string | number;\n//   icon: React.ReactNode;\n//   gradient: string;\n// }) {\n//   return (\n//     <Card className=\"rounded-2xl shadow-sm hover:shadow-md transition\">\n//       <CardContent className=\"p-6 flex items-center gap-4\">\n//         <div\n//           className={`p-3 rounded-xl text-white bg-gradient-to-br ${gradient}`}\n//         >\n//           {icon}\n//         </div>\n\n//         <div>\n//           <p className=\"text-sm text-muted-foreground\">{title}</p>\n//           <p className=\"text-2xl font-bold\">{value}</p>\n//         </div>\n//       </CardContent>\n//     </Card>\n//   );\n// }\n\n\n\"use client\";\n\nimport \"../send-email.css\";\nimport AuthGuard from \"@/components/AuthGuard\";\nimport { useParams } from \"next/navigation\";\n\n// interface SendEmailProps {\n//   emailId?: string;\n// }\n\nexport default function editEmail() {\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  const { id } = useParams();\n  // const [to, setTo] = useState<string[]>([]);\n  // const [inputValue, setInputValue] = useState(\"\");\n\n  // const [subject, setSubject] = useState(\"\");\n  // const [body, setBody] = useState(\"\");\n  // const [senderName, setSenderName] = useState(\"\");\n\n  // const [loading, setLoading] = useState(false);\n  // const [error, setError] = useState<string | null>(null);\n  // const [success, setSuccess] = useState(\"\");\n\n  // const [draftId, setDraftId] = useState<string | null>(id as string);\n\n\n  // const isValidEmail = (email: string) =>\n  //   /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);\n\n  // const addEmail = (email: string) => {\n  //   email = email.trim();\n\n  //   if (!isValidEmail(email)) {\n  //     setError(\"Invalid email format\");\n  //     return;\n  //   }\n\n  //   if (!to.includes(email)) {\n  //     setTo((prev) => [email, ...prev]);\n  //   }\n\n  //   setInputValue(\"\");\n  //   setError(null);\n  // };\n\n  // const removeEmail = (email: string) => {\n  //   setTo(to.filter((e) => e !== email));\n  // };\n\n  // // -----------------------------\n  // // Enter Key Support\n  // // -----------------------------\n  // const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n  //   if (e.key === \"Enter\" && inputValue.trim()) {\n  //     e.preventDefault();\n  //     addEmail(inputValue);\n  //   }\n  // };\n\n  // const handlePaste = (e: React.ClipboardEvent<HTMLInputElement>) => {\n  //   const paste = e.clipboardData.getData(\"text\");\n  //   const emails = paste.split(/[,;\\s]+/);\n\n  //   emails.forEach((email) => {\n  //     if (isValidEmail(email) && !to.includes(email)) {\n  //       setTo((prev) => [email, ...prev]);\n  //     }\n  //   });\n\n  //   e.preventDefault();\n  // };\n\n  // useEffect(() => {\n  //   const user = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\n  //   setSenderName(user?.email || \"\");\n  // }, []);\n\n  // useEffect(() => {\n  //   if (!id) return;\n\n  //   const fetchDraft = async () => {\n  //     try {\n  //       const res = await fetch(`api/emails/${id}`);\n  //       const data = await res.json();\n\n  //       if (!res.ok) throw new Error(data.error);\n\n  //       setTo(data.to || []);\n  //       setSubject(data.subject || \"\");\n  //       setBody(data.body || \"\");\n  //       setDraftId(data._id);\n  //     } catch (err) {\n  //       console.error(\"Draft load failed\", err);\n  //     }\n  //   };\n\n  //   fetchDraft();\n  // }, [id]);\n\n  // const saveAsDraft = async () => {\n  //   setLoading(true);\n  //   setError(null);\n\n  //   try {\n  //     const res = await fetch(\"/api/draft\", {\n  //       method: \"POST\",\n  //       headers: {\n  //         \"Content-Type\": \"application/json\",\n  //         Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n  //       },\n  //       body: JSON.stringify({\n  //         id: draftId,\n  //         to,\n  //         subject,\n  //         body,\n  //         senderName,\n  //       }),\n  //     });\n\n  //     const data = await res.json();\n  //     if (!res.ok) throw new Error(data.error);\n\n  //     setDraftId(data._id);\n  //     setSuccess(\"Draft saved successfully!\");\n  //   // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  //   } catch (err: any) {\n  //     setError(err.message);\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n\n  // // -----------------------------\n  // // Send Email\n  // // -----------------------------\n  // const sendEmail = async () => {\n  //   if (!to.length || !subject || !body) {\n  //     setError(\"All fields required\");\n  //     return;\n  //   }\n\n  //   setLoading(true);\n  //   setError(null);\n\n  //   try {\n  //     const res = await fetch(\"/api/send\", {\n  //       method: \"POST\",\n  //       headers: {\n  //         \"Content-Type\": \"application/json\",\n  //         Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n  //       },\n  //       body: JSON.stringify({\n  //         to,\n  //         subject,\n  //         body,\n  //         senderName,\n  //       }),\n  //     });\n\n  //     const data = await res.json();\n  //     if (!res.ok) throw new Error(data.error);\n\n  //     setSuccess(\"Email sent successfully!\");\n\n  //     // Clear form after send\n  //     setTo([]);\n  //     setSubject(\"\");\n  //     setBody(\"\");\n  //     setDraftId(null);\n  //   // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  //   } catch (err: any) {\n  //     setError(err.message);\n  //   } finally {\n  //     setLoading(false);\n  //   }\n  // };\n\n  // const isFormValid = () =>\n  //   to.length > 0 && subject.trim() && body.trim();\n\n  return (\n    <AuthGuard>\n      <SendEmail emailId={id} />\n    </AuthGuard>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}