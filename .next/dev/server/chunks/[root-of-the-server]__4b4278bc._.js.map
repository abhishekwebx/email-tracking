{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/lib/sanity.ts"],"sourcesContent":["import { createClient } from \"@sanity/client\";\n\n// export const sanity = createClient({\n//   projectId: 'lgzekbmp',\n//   dataset: \"production\",\n//   apiVersion: \"2024-01-01\",\n//   useCdn: false,\n//   token: 'sk8SI0h8a7NRypPIhe36dNQhZJWuS0Do22aKeFwLo4EKbUl9ihHeI3zhXyP9OKkZCDIZ6C2jkCXFcc9t8DMctKvF7jHqghh0Nu1NsP1LeT87OAyKhGGzWyRvidBu4GGpBRXRnHWECSQy3P28l5S6Io56kzHIXtahUCH9eT7mT9Ew7SzIxujV',\n// });\n\n\n\nexport const sanity = createClient({\n  projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID!,\n  dataset: 'production',\n  apiVersion: '2024-01-01',\n  token: process.env.SANITY_API_TOKEN,\n  useCdn: false,\n})\n"],"names":[],"mappings":";;;;AAAA;;AAYO,MAAM,SAAS,IAAA,oQAAY,EAAC;IACjC,SAAS;IACT,SAAS;IACT,YAAY;IACZ,OAAO,QAAQ,GAAG,CAAC,gBAAgB;IACnC,QAAQ;AACV"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/app/api/admin/login/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { sanity } from \"@/lib/sanity\";\nimport bcrypt from \"bcryptjs\"; // for password hashing\n\nexport async function POST(req: Request) {\n  try {\n    const { email, password } = await req.json();\n\n    if (!email || !password) {\n      return NextResponse.json(\n        { error: \"Email and password required\" },\n        { status: 400 }\n      );\n    }\n\n    // Fetch user by email\n    const query = `*[_type == \"user\" && email == $email][0]`;\n    const user = await sanity.fetch(query, { email });\n\n    if (!user || user.role !== \"admin\") {\n      return NextResponse.json(\n        { error: \"Admin user not found\" },\n        { status: 401 }\n      );\n    }\n\n    // Password check (assuming hashed password stored in Sanity)\n    const isValid = bcrypt.compareSync(password, user.password || \"\");\n\n    if (!isValid) {\n      return NextResponse.json({ error: \"Invalid password\" }, { status: 401 });\n    }\n\n    // Create a simple token (in production use JWT)\n    const token = Math.random().toString(36).substring(2);\n\n    return NextResponse.json({\n      _id: user._id,\n      email: user.email,\n      role: user.role,\n      token,\n    });\n  } catch (err) {\n    console.error(err);\n    return NextResponse.json({ error: \"Login failed\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA,6VAA+B,uBAAuB;;;;AAE/C,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAE1C,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,oNAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA8B,GACvC;gBAAE,QAAQ;YAAI;QAElB;QAEA,sBAAsB;QACtB,MAAM,QAAQ,CAAC,wCAAwC,CAAC;QACxD,MAAM,OAAO,MAAM,6LAAM,CAAC,KAAK,CAAC,OAAO;YAAE;QAAM;QAE/C,IAAI,CAAC,QAAQ,KAAK,IAAI,KAAK,SAAS;YAClC,OAAO,oNAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAuB,GAChC;gBAAE,QAAQ;YAAI;QAElB;QAEA,6DAA6D;QAC7D,MAAM,UAAU,kNAAM,CAAC,WAAW,CAAC,UAAU,KAAK,QAAQ,IAAI;QAE9D,IAAI,CAAC,SAAS;YACZ,OAAO,oNAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,gDAAgD;QAChD,MAAM,QAAQ,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;QAEnD,OAAO,oNAAY,CAAC,IAAI,CAAC;YACvB,KAAK,KAAK,GAAG;YACb,OAAO,KAAK,KAAK;YACjB,MAAM,KAAK,IAAI;YACf;QACF;IACF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC;QACd,OAAO,oNAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAe,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF"}}]
}