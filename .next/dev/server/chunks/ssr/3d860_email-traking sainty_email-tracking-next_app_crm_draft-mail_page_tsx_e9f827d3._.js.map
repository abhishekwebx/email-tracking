{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/app/crm/draft-mail/page.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Swal from \"sweetalert2\";\n\nexport default function DraftList() {\n  const [drafts, setDrafts] = useState<any[]>([]);\n  const router = useRouter();\n\n  const loadDrafts = async () => {\n    const res = await fetch(\"/api/getdraft\");\n    const data = await res.json();\n    setDrafts(data);\n  };\n\n  useEffect(() => {\n    loadDrafts();\n  }, []);\n\n  /* =====================\n     DELETE DRAFT\n  ====================== */\n  const deleteDraft = async (id: string) => {\n    const result = await Swal.fire({\n      title: \"Delete Draft?\",\n      text: \"You won't be able to recover this draft!\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#dc2626\",\n      cancelButtonColor: \"#6b7280\",\n      confirmButtonText: \"Yes, delete it!\",\n    });\n\n    if (!result.isConfirmed) return;\n\n    try {\n      await fetch(`/api/draft/delete?id=${id}`, {\n        method: \"DELETE\",\n      });\n\n      Swal.fire({\n        toast: true,\n        position: \"top-end\",\n        icon: \"success\",\n        title: \"Draft deleted\",\n        showConfirmButton: false,\n        timer: 2000,\n      });\n\n      loadDrafts();\n    } catch {\n      Swal.fire(\"Error\", \"Failed to delete draft\", \"error\");\n    }\n  };\n\n  return (\n    <div className=\"p-6\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-800\">Draft Emails</h2>\n        <p className=\"text-gray-500 text-sm\">\n          Manage and edit your saved draft emails\n        </p>\n      </div>\n\n      {/* Card */}\n      <div className=\"bg-white shadow-lg rounded-2xl overflow-hidden border\">\n        <table className=\"w-full\">\n          <thead className=\"bg-gray-50 border-b\">\n            <tr className=\"text-left text-sm text-gray-600\">\n              <th className=\"p-4\">Subject</th>\n              <th className=\"p-4\">Recipients</th>\n              <th className=\"p-4 text-center\">Status</th>\n              <th className=\"p-4 text-center\">Action</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {drafts.length === 0 && (\n              <tr>\n                <td colSpan={4} className=\"text-center py-12 text-gray-400\">\n                  No Draft Emails Found\n                </td>\n              </tr>\n            )}\n\n            {drafts.map((d: any) => (\n              <tr key={d._id} className=\"border-b hover:bg-gray-50 transition\">\n                {/* Subject */}\n                <td className=\"p-4 font-medium text-gray-800\">\n                  {d.subject || \"No Subject\"}\n                </td>\n\n                {/* Recipients */}\n                <td className=\"p-4 text-gray-600\">\n                  {d.to?.length > 0 ? (\n                    <div className=\"flex flex-wrap gap-2\">\n                      {d.to.slice(0, 3).map((email: string) => (\n                        <span\n                          key={email}\n                          className=\"bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full\"\n                        >\n                          {email}\n                        </span>\n                      ))}\n\n                      {d.to.length > 3 && (\n                        <span className=\"text-xs text-gray-400\">\n                          +{d.to.length - 3} more\n                        </span>\n                      )}\n                    </div>\n                  ) : (\n                    \"-\"\n                  )}\n                </td>\n\n                {/* Status */}\n                <td className=\"p-4 text-center\">\n                  <span className=\"bg-yellow-100 text-yellow-700 text-xs px-3 py-1 rounded-full\">\n                    Draft\n                  </span>\n                </td>\n\n                {/* Actions */}\n                <td className=\"p-4 text-center space-x-2\">\n                  <button\n                    onClick={() => {\n                      router.push(`/crm/send/${d._id}`);\n                      sessionStorage.removeItem(\"route\");\n                    }}\n                    className=\"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-indigo-700 transition duration-300 ease-in-out transform hover:scale-105 cursor-pointer\"\n                  >\n                    Edit\n                  </button>\n\n                  <button\n                    onClick={() => deleteDraft(d._id)}\n                    className=\"bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700 transition duration-300 ease-in-out transform hover:scale-105 cursor-pointer\"\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AALA,qDAAqD,GACrD;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qRAAQ,EAAQ,EAAE;IAC9C,MAAM,SAAS,IAAA,mNAAS;IAExB,MAAM,aAAa;QACjB,MAAM,MAAM,MAAM,MAAM;QACxB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,UAAU;IACZ;IAEA,IAAA,sRAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL;;yBAEuB,GACvB,MAAM,cAAc,OAAO;QACzB,MAAM,SAAS,MAAM,+OAAI,CAAC,IAAI,CAAC;YAC7B,OAAO;YACP,MAAM;YACN,MAAM;YACN,kBAAkB;YAClB,oBAAoB;YACpB,mBAAmB;YACnB,mBAAmB;QACrB;QAEA,IAAI,CAAC,OAAO,WAAW,EAAE;QAEzB,IAAI;YACF,MAAM,MAAM,CAAC,qBAAqB,EAAE,IAAI,EAAE;gBACxC,QAAQ;YACV;YAEA,+OAAI,CAAC,IAAI,CAAC;gBACR,OAAO;gBACP,UAAU;gBACV,MAAM;gBACN,OAAO;gBACP,mBAAmB;gBACnB,OAAO;YACT;YAEA;QACF,EAAE,OAAM;YACN,+OAAI,CAAC,IAAI,CAAC,SAAS,0BAA0B;QAC/C;IACF;IAEA,qBACE,kTAAC;QAAI,WAAU;;0BAEb,kTAAC;gBAAI,WAAU;;kCACb,kTAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,kTAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;0BAMvC,kTAAC;gBAAI,WAAU;0BACb,cAAA,kTAAC;oBAAM,WAAU;;sCACf,kTAAC;4BAAM,WAAU;sCACf,cAAA,kTAAC;gCAAG,WAAU;;kDACZ,kTAAC;wCAAG,WAAU;kDAAM;;;;;;kDACpB,kTAAC;wCAAG,WAAU;kDAAM;;;;;;kDACpB,kTAAC;wCAAG,WAAU;kDAAkB;;;;;;kDAChC,kTAAC;wCAAG,WAAU;kDAAkB;;;;;;;;;;;;;;;;;sCAIpC,kTAAC;;gCACE,OAAO,MAAM,KAAK,mBACjB,kTAAC;8CACC,cAAA,kTAAC;wCAAG,SAAS;wCAAG,WAAU;kDAAkC;;;;;;;;;;;gCAM/D,OAAO,GAAG,CAAC,CAAC,kBACX,kTAAC;wCAAe,WAAU;;0DAExB,kTAAC;gDAAG,WAAU;0DACX,EAAE,OAAO,IAAI;;;;;;0DAIhB,kTAAC;gDAAG,WAAU;0DACX,EAAE,EAAE,EAAE,SAAS,kBACd,kTAAC;oDAAI,WAAU;;wDACZ,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,sBACrB,kTAAC;gEAEC,WAAU;0EAET;+DAHI;;;;;wDAOR,EAAE,EAAE,CAAC,MAAM,GAAG,mBACb,kTAAC;4DAAK,WAAU;;gEAAwB;gEACpC,EAAE,EAAE,CAAC,MAAM,GAAG;gEAAE;;;;;;;;;;;;2DAKxB;;;;;;0DAKJ,kTAAC;gDAAG,WAAU;0DACZ,cAAA,kTAAC;oDAAK,WAAU;8DAA+D;;;;;;;;;;;0DAMjF,kTAAC;gDAAG,WAAU;;kEACZ,kTAAC;wDACC,SAAS;4DACP,OAAO,IAAI,CAAC,CAAC,UAAU,EAAE,EAAE,GAAG,EAAE;4DAChC,eAAe,UAAU,CAAC;wDAC5B;wDACA,WAAU;kEACX;;;;;;kEAID,kTAAC;wDACC,SAAS,IAAM,YAAY,EAAE,GAAG;wDAChC,WAAU;kEACX;;;;;;;;;;;;;uCApDI,EAAE,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+D5B"}}]
}