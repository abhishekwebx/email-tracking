{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/app/dashboard/Sidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport {\n  LayoutDashboard,\n  Mail,\n  BarChart3,\n  Settings,\n  X,\n} from \"lucide-react\";\n\nexport default function Sidebar({\n  open,\n  setOpen,\n}: {\n  open: boolean;\n  setOpen: (v: boolean) => void;\n}) {\n  const pathname = usePathname();\n\n  const menu = [\n    { title: \"Dashboard\", icon: LayoutDashboard, href: \"/dashboard\" },\n    { title: \"Send Email\", icon: Mail, href: \"/send\" },\n    { title: \"Analytics\", icon: BarChart3, href: \"/analytics\" },\n    { title: \"Settings\", icon: Settings, href: \"/settings\" },\n  ];\n\n  return (\n    <>\n      {/* Mobile Overlay */}\n      {open && (\n        <div\n          className=\"fixed inset-0 bg-black/40 z-40 md:hidden\"\n          onClick={() => setOpen(false)}\n        />\n      )}\n\n      {/* Sidebar */}\n      <aside\n        className={`fixed top-0 left-0 z-50 h-screen w-64 bg-white border-r transition-transform\n        ${open ? \"translate-x-0\" : \"-translate-x-full md:translate-x-0\"}`}\n      >\n        {/* Logo */}\n        <div className=\"flex items-center justify-between p-5 border-b\">\n          <h2 className=\"text-xl font-bold\">üìß Email CRM</h2>\n\n          <button\n            className=\"md:hidden\"\n            onClick={() => setOpen(false)}\n          >\n            <X />\n          </button>\n        </div>\n\n        {/* Menu */}\n        <nav className=\"p-4 space-y-2\">\n          {menu.map((item) => {\n            const Icon = item.icon;\n            const active = pathname === item.href;\n\n            return (\n              <Link\n                key={item.href}\n                href={item.href}\n                className={`flex items-center gap-3 px-4 py-2 rounded-xl transition font-medium\n                  ${\n                    active\n                      ? \"bg-blue-600 text-white shadow\"\n                      : \"text-gray-700 hover:bg-gray-100\"\n                  }`}\n              >\n                <Icon size={18} />\n                {item.title}\n              </Link>\n            );\n          })}\n        </nav>\n      </aside>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAYe,SAAS,QAAQ,EAC9B,IAAI,EACJ,OAAO,EAIR;IACC,MAAM,WAAW,IAAA,qNAAW;IAE5B,MAAM,OAAO;QACX;YAAE,OAAO;YAAa,MAAM,mTAAe;YAAE,MAAM;QAAa;QAChE;YAAE,OAAO;YAAc,MAAM,8QAAI;YAAE,MAAM;QAAQ;QACjD;YAAE,OAAO;YAAa,MAAM,mSAAS;YAAE,MAAM;QAAa;QAC1D;YAAE,OAAO;YAAY,MAAM,0RAAQ;YAAE,MAAM;QAAY;KACxD;IAED,qBACE;;YAEG,sBACC,kTAAC;gBACC,WAAU;gBACV,SAAS,IAAM,QAAQ;;;;;;0BAK3B,kTAAC;gBACC,WAAW,CAAC;QACZ,EAAE,OAAO,kBAAkB,sCAAsC;;kCAGjE,kTAAC;wBAAI,WAAU;;0CACb,kTAAC;gCAAG,WAAU;0CAAoB;;;;;;0CAElC,kTAAC;gCACC,WAAU;gCACV,SAAS,IAAM,QAAQ;0CAEvB,cAAA,kTAAC,qQAAC;;;;;;;;;;;;;;;;kCAKN,kTAAC;wBAAI,WAAU;kCACZ,KAAK,GAAG,CAAC,CAAC;4BACT,MAAM,OAAO,KAAK,IAAI;4BACtB,MAAM,SAAS,aAAa,KAAK,IAAI;4BAErC,qBACE,kTAAC,2OAAI;gCAEH,MAAM,KAAK,IAAI;gCACf,WAAW,CAAC;kBACV,EACE,SACI,kCACA,mCACJ;;kDAEJ,kTAAC;wCAAK,MAAM;;;;;;oCACX,KAAK,KAAK;;+BAVN,KAAK,IAAI;;;;;wBAapB;;;;;;;;;;;;;;AAKV"}},
    {"offset": {"line": 156, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/app/dashboard/DashboardLayout.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport Sidebar from \"./Sidebar\";\nimport { Menu } from \"lucide-react\";\n\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <div className=\"flex\">\n      {/* Fixed Sidebar */}\n      <Sidebar open={open} setOpen={setOpen} />\n\n      {/* Main Content */}\n      <div className=\"flex-1 md:ml-64 min-h-screen bg-gray-50\">\n        {/* Mobile Topbar */}\n        <div className=\"md:hidden flex items-center justify-between bg-white border-b p-4 sticky top-0 z-30\">\n          <button onClick={() => setOpen(true)}>\n            <Menu />\n          </button>\n          <h1 className=\"font-semibold\">Email CRM</h1>\n        </div>\n\n        <main className=\"p-4 md:p-8\">{children}</main>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS,gBAAgB,EACtC,QAAQ,EAGT;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qRAAQ,EAAC;IAEjC,qBACE,kTAAC;QAAI,WAAU;;0BAEb,kTAAC,2MAAO;gBAAC,MAAM;gBAAM,SAAS;;;;;;0BAG9B,kTAAC;gBAAI,WAAU;;kCAEb,kTAAC;wBAAI,WAAU;;0CACb,kTAAC;gCAAO,SAAS,IAAM,QAAQ;0CAC7B,cAAA,kTAAC,8QAAI;;;;;;;;;;0CAEP,kTAAC;gCAAG,WAAU;0CAAgB;;;;;;;;;;;;kCAGhC,kTAAC;wBAAK,WAAU;kCAAc;;;;;;;;;;;;;;;;;;AAItC"}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/app/send/emailEditor.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useEffect } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { EditorRef } from \"react-email-editor\";\n\n// ‚úÖ Lazy load editor (performance fix)\nconst EmailEditor = dynamic(() => import(\"react-email-editor\"), {\n  ssr: false,\n});\n\ninterface Props {\n  body: string;\n  setBody: (html: string) => void;\n  setDesign?: (design: string) => void;\n  design?: string;\n}\n\nexport default function EmailBuilder({\n  setBody,\n  setDesign,\n  design,\n}: Props) {\n  const emailEditorRef = useRef<EditorRef>(null);\n  const intervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // ‚úÖ Auto Save Function\n  const autoSave = () => {\n    const editor = emailEditorRef.current?.editor;\n\n    if (!editor) return;\n\n    editor.exportHtml((data: { html: string; design: string }) => {\n      setBody(data.html);\n\n      if (setDesign) {\n        setDesign(data.design);\n      }\n    });\n  };\n\n  // ‚úÖ Load saved design when editor ready\n  const handleReady = () => {\n    const editor = emailEditorRef.current?.editor;\n\n    if (!editor) return;\n\n    // Load existing design\n    if (design) {\n      editor.loadDesign(design);\n    }\n\n    // Start autosave\n    intervalRef.current = setInterval(autoSave, 5000);\n  };\n\n  // ‚úÖ Cleanup interval (VERY IMPORTANT)\n  useEffect(() => {\n    return () => {\n      if (intervalRef.current) {\n        clearInterval(intervalRef.current);\n      }\n    };\n  }, []);\n\n  return (\n    <div>\n      <EmailEditor\n        ref={emailEditorRef}\n        style={{ height: \"500px\" }}\n        onReady={handleReady}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;AAHA;;;;AAMA,uCAAuC;AACvC,MAAM,cAAc,IAAA,8OAAO;;;;;;IACzB,KAAK;;AAUQ,SAAS,aAAa,EACnC,OAAO,EACP,SAAS,EACT,MAAM,EACA;IACN,MAAM,iBAAiB,IAAA,mRAAM,EAAY;IACzC,MAAM,cAAc,IAAA,mRAAM,EAAwB;IAElD,uBAAuB;IACvB,MAAM,WAAW;QACf,MAAM,SAAS,eAAe,OAAO,EAAE;QAEvC,IAAI,CAAC,QAAQ;QAEb,OAAO,UAAU,CAAC,CAAC;YACjB,QAAQ,KAAK,IAAI;YAEjB,IAAI,WAAW;gBACb,UAAU,KAAK,MAAM;YACvB;QACF;IACF;IAEA,wCAAwC;IACxC,MAAM,cAAc;QAClB,MAAM,SAAS,eAAe,OAAO,EAAE;QAEvC,IAAI,CAAC,QAAQ;QAEb,uBAAuB;QACvB,IAAI,QAAQ;YACV,OAAO,UAAU,CAAC;QACpB;QAEA,iBAAiB;QACjB,YAAY,OAAO,GAAG,YAAY,UAAU;IAC9C;IAEA,sCAAsC;IACtC,IAAA,sRAAS,EAAC;QACR,OAAO;YACL,IAAI,YAAY,OAAO,EAAE;gBACvB,cAAc,YAAY,OAAO;YACnC;QACF;IACF,GAAG,EAAE;IAEL,qBACE,kTAAC;kBACC,cAAA,kTAAC;YACC,KAAK;YACL,OAAO;gBAAE,QAAQ;YAAQ;YACzB,SAAS;;;;;;;;;;;AAIjB"}},
    {"offset": {"line": 315, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/app/send/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport \"./send-email.css\";\nimport EmailBuilder from \"./emailEditor\";\n\ninterface EmailData {\n  id: string;\n  to: string;\n  subject: string;\n  body: string;\n  senderName: string;\n}\n\ninterface SendEmailProps {\n  emailId?: string;\n}\n\nexport default function SendEmail({ emailId }: SendEmailProps) {\n  const router = useRouter();\n\n  const [to, setTo] = useState(\"\");\n  const [subject, setSubject] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [senderName, setSenderName] = useState(\"\");\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState(false);\n\n  // Load user safely\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\") || \"{}\");\n    setSenderName(user?.email || \"\");\n  }, []);\n\n  // Load existing email if editing\n  useEffect(() => {\n    if (!emailId) return;\n\n    const fetchEmail = async () => {\n      setLoading(true);\n      try {\n        const res = await fetch(`/api/emails/${emailId}`, {\n          headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` },\n        });\n        const data: EmailData = await res.json();\n        if (!res.ok)\n          throw new Error(data?.toString() || \"Failed to load email\");\n\n        setTo(data.to);\n        setSubject(data.subject);\n        setBody(data.body);\n      } catch (err) {\n        // setError(err.message || \"Failed to fetch email\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchEmail();\n  }, [emailId]);\n\n  const sendOrUpdate = async () => {\n    setError(null);\n    setSuccess(false);\n\n    if (!to || !subject || !body) {\n      setError(\"All fields are required\");\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const res = await fetch(\n        emailId ? `/api/emails/${emailId}` : \"/api/send\",\n        {\n          method: emailId ? \"PUT\" : \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n          },\n          body: JSON.stringify({ to, subject, body, senderName }),\n        },\n      );\n\n      const data = await res.json();\n      if (!res.ok) throw new Error(data.error || \"Failed to send/update email\");\n\n      setSuccess(true);\n\n      if (!emailId) {\n        setTo(\"\");\n        setSubject(\"\");\n        setBody(\"\");\n      }\n    } catch (err) {\n      // setError(err.message || \"Something went wrong\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"card\">\n        <button\n          className=\"back-button\"\n          onClick={() => router.push(\"/dashboard\")}\n        >\n          ‚Üê Back\n        </button>\n\n        <h1>{emailId ? \"Edit Email\" : \"Send Email\"}</h1>\n        <p className=\"subtitle\">Track opens in real-time</p>\n\n        {error && <div className=\"error\">{error}</div>}\n        {success && (\n          <div className=\"success\">\n            {emailId\n              ? \"Email updated successfully!\"\n              : \"Email sent successfully!\"}\n          </div>\n        )}\n\n        <label>To</label>\n        <input\n          type=\"email\"\n          placeholder=\"user@example.com\"\n          value={to}\n          onChange={(e) => setTo(e.target.value)}\n        />\n\n        <label>Subject</label>\n        <input\n          placeholder=\"Email subject\"\n          value={subject}\n          onChange={(e) => setSubject(e.target.value)}\n        />\n\n        <label>Message</label>\n        {/* <textarea\n          placeholder=\"Write your email here...\"\n          value={body}\n          onChange={(e) => setBody(e.target.value)}\n        /> */}\n\n        <EmailBuilder body={body} setBody={setBody} />\n\n        <button\n          className=\"send-button\"\n          disabled={loading}\n          onClick={sendOrUpdate}\n        >\n          {loading\n            ? emailId\n              ? \"Updating‚Ä¶\"\n              : \"Sending‚Ä¶\"\n            : emailId\n              ? \"Update Email\"\n              : \"Send Email\"}\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}