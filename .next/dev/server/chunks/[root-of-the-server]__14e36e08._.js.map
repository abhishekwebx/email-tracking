{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/lib/sanity.ts"],"sourcesContent":["import { createClient } from \"@sanity/client\";\n\n// export const sanity = createClient({\n//   projectId: 'lgzekbmp',\n//   dataset: \"production\",\n//   apiVersion: \"2024-01-01\",\n//   useCdn: false,\n//   token: 'sk8SI0h8a7NRypPIhe36dNQhZJWuS0Do22aKeFwLo4EKbUl9ihHeI3zhXyP9OKkZCDIZ6C2jkCXFcc9t8DMctKvF7jHqghh0Nu1NsP1LeT87OAyKhGGzWyRvidBu4GGpBRXRnHWECSQy3P28l5S6Io56kzHIXtahUCH9eT7mT9Ew7SzIxujV',\n// });\n\n\n\nexport const sanity = createClient({\n  projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID!,\n  dataset: 'production',\n  apiVersion: '2024-01-01',\n  token: process.env.SANITY_API_TOKEN,\n  useCdn: false,\n})\n\n\n// async function deleteAllEmails() {\n//   try {\n//     // GROQ query to fetch all email _id's\n//     const emails = await sanity.fetch(`*[_type == \"emails\"]{_id}`);\n    \n//     // Delete all emails\n//     const deletePromises = emails.map((email: { _id: any; }) => sanity.delete(email._id));\n//     await Promise.all(deletePromises);\n\n//     console.log('All emails deleted successfully!');\n//   } catch (err) {\n//     console.error('Error deleting emails:', err);\n//   }\n// }\n\n// deleteAllEmails();\n"],"names":[],"mappings":";;;;AAAA;;AAYO,MAAM,SAAS,IAAA,oQAAY,EAAC;IACjC,SAAS;IACT,SAAS;IACT,YAAY;IACZ,OAAO,QAAQ,GAAG,CAAC,gBAAgB;IACnC,QAAQ;AACV,GAGA,qCAAqC;CACrC,UAAU;CACV,6CAA6C;CAC7C,sEAAsE;CAEtE,2BAA2B;CAC3B,6FAA6F;CAC7F,yCAAyC;CAEzC,uDAAuD;CACvD,oBAAoB;CACpB,oDAAoD;CACpD,MAAM;CACN,IAAI;CAEJ,qBAAqB"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/app/api/templates/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { sanity } from \"@/lib/sanity\";\n\n/* =========================\n   GET TEMPLATE\n========================= */\nexport async function GET(\n  req: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params;\n\n    const template = await sanity.fetch(\n      `*[_type == \"emailTemplate\" && _id == $id][0]`,\n      { id }\n    );\n\n    if (!template) {\n      return NextResponse.json(\n        { error: \"Template not found\" },\n        { status: 404 }\n      );\n    }\n\n    return NextResponse.json(template);\n  } catch (error) {\n    console.error(error);\n    return NextResponse.json(\n      { error: \"Failed to fetch template\" },\n      { status: 500 }\n    );\n  }\n}\n\n/* =========================\n   DELETE TEMPLATE\n========================= */\nexport async function DELETE(\n  req: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params;\n\n    await sanity.delete(id);\n\n    return NextResponse.json({\n      success: true,\n      message: \"Template deleted successfully\",\n    });\n  } catch (error) {\n    console.error(error);\n    return NextResponse.json(\n      { error: \"Failed to delete template\" },\n      { status: 500 }\n    );\n  }\n}\n\n/* =====================\n   UPDATE TEMPLATE\n===================== */\nexport async function PUT(\n  req: Request,\n  { params }: { params: Promise<{ id: string }> }\n) {\n  try {\n    const { id } = await params;\n    const body = await req.json();\n\n    console.log(\"Updating Template ID:\", id);\n    console.log(\"Payload:\", body);\n\n    // Safety remove restricted fields\n    delete body._id;\n    delete body._type;\n    delete body.id;\n\n    const updated = await sanity\n      .patch(id)\n      .set(body)\n      .commit();\n\n    return NextResponse.json(updated);\n  } catch (error) {\n    console.error(\"UPDATE ERROR:\", error);\n\n    return NextResponse.json(\n      { error: \"Template update failed\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAKO,eAAe,IACpB,GAAY,EACZ,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QAErB,MAAM,WAAW,MAAM,6LAAM,CAAC,KAAK,CACjC,CAAC,4CAA4C,CAAC,EAC9C;YAAE;QAAG;QAGP,IAAI,CAAC,UAAU;YACb,OAAO,oNAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAqB,GAC9B;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,oNAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,oNAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAElB;AACF;AAKO,eAAe,OACpB,GAAY,EACZ,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QAErB,MAAM,6LAAM,CAAC,MAAM,CAAC;QAEpB,OAAO,oNAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QACd,OAAO,oNAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAElB;AACF;AAKO,eAAe,IACpB,GAAY,EACZ,EAAE,MAAM,EAAuC;IAE/C,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,QAAQ,GAAG,CAAC,yBAAyB;QACrC,QAAQ,GAAG,CAAC,YAAY;QAExB,kCAAkC;QAClC,OAAO,KAAK,GAAG;QACf,OAAO,KAAK,KAAK;QACjB,OAAO,KAAK,EAAE;QAEd,MAAM,UAAU,MAAM,6LAAM,CACzB,KAAK,CAAC,IACN,GAAG,CAAC,MACJ,MAAM;QAET,OAAO,oNAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iBAAiB;QAE/B,OAAO,oNAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyB,GAClC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}