{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/lib/sanity.ts"],"sourcesContent":["import { createClient } from \"@sanity/client\";\n\n// export const sanity = createClient({\n//   projectId: 'lgzekbmp',\n//   dataset: \"production\",\n//   apiVersion: \"2024-01-01\",\n//   useCdn: false,\n//   token: 'sk8SI0h8a7NRypPIhe36dNQhZJWuS0Do22aKeFwLo4EKbUl9ihHeI3zhXyP9OKkZCDIZ6C2jkCXFcc9t8DMctKvF7jHqghh0Nu1NsP1LeT87OAyKhGGzWyRvidBu4GGpBRXRnHWECSQy3P28l5S6Io56kzHIXtahUCH9eT7mT9Ew7SzIxujV',\n// });\n\n\n\nexport const sanity = createClient({\n  projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID!,\n  dataset: 'production',\n  apiVersion: '2024-01-01',\n  token: process.env.SANITY_API_TOKEN,\n  useCdn: false,\n})\n\n\n// async function deleteAllEmails() {\n//   try {\n//     // GROQ query to fetch all email _id's\n//     const emails = await sanity.fetch(`*[_type == \"emails\"]{_id}`);\n    \n//     // Delete all emails\n//     const deletePromises = emails.map((email: { _id: any; }) => sanity.delete(email._id));\n//     await Promise.all(deletePromises);\n\n//     console.log('All emails deleted successfully!');\n//   } catch (err) {\n//     console.error('Error deleting emails:', err);\n//   }\n// }\n\n// deleteAllEmails();\n"],"names":[],"mappings":";;;;AAAA;;AAYO,MAAM,SAAS,IAAA,oQAAY,EAAC;IACjC,SAAS;IACT,SAAS;IACT,YAAY;IACZ,OAAO,QAAQ,GAAG,CAAC,gBAAgB;IACnC,QAAQ;AACV,GAGA,qCAAqC;CACrC,UAAU;CACV,6CAA6C;CAC7C,sEAAsE;CAEtE,2BAA2B;CAC3B,6FAA6F;CAC7F,yCAAyC;CAEzC,uDAAuD;CACvD,oBAAoB;CACpB,oDAAoD;CACpD,MAAM;CACN,IAAI;CAEJ,qBAAqB"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking%20sainty/email-tracking-next/app/api/profile/route.ts"],"sourcesContent":["// import { sanity } from \"@/lib/sanity\";\n\n// export async function POST(req: Request) {\n//   const data = await req.json();\n\n//   await sanity.createOrReplace({\n//     _type: \"profile\",\n//     _id: \"user-profile\",\n//     ...data,\n//   });\n\n//   return Response.json({ success: true });\n// }\n\nimport { NextResponse } from \"next/server\";\nimport { sanity } from \"@/lib/sanity\";\nimport jwt from \"jsonwebtoken\";\n\nexport async function GET(req: Request) {\n  try {\n    const authHeader = req.headers.get(\"authorization\");\n\n    if (!authHeader) {\n      return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n    }\n\n    const token = authHeader.replace(\"Bearer \", \"\");\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const decoded: any = jwt.verify(token, process.env.JWT_SECRET!);\n\n    const profile = await sanity.fetch(\n      `*[_type == \"user\" && _id == $userId][0]{\n        _id,\n        name,\n        email,\n        phone,\n        company,\n        \"avatar\": avatar.asset->url\n      }`,\n      {\n        userId: decoded.userId,\n      }\n    );\n\n    return NextResponse.json(profile);\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  } catch (error: any) {\n    return NextResponse.json(\n      { error: error.message },\n      { status: 500 }\n    );\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA,yCAAyC;AAEzC,6CAA6C;AAC7C,mCAAmC;AAEnC,mCAAmC;AACnC,wBAAwB;AACxB,2BAA2B;AAC3B,eAAe;AACf,QAAQ;AAER,6CAA6C;AAC7C,IAAI;AAEJ;AACA;AACA;;;;AAEO,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,aAAa,IAAI,OAAO,CAAC,GAAG,CAAC;QAEnC,IAAI,CAAC,YAAY;YACf,OAAO,oNAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACpE;QAEA,MAAM,QAAQ,WAAW,OAAO,CAAC,WAAW;QAE5C,8DAA8D;QAC9D,MAAM,UAAe,sNAAG,CAAC,MAAM,CAAC,OAAO,QAAQ,GAAG,CAAC,UAAU;QAE7D,MAAM,UAAU,MAAM,6LAAM,CAAC,KAAK,CAChC,CAAC;;;;;;;OAOA,CAAC,EACF;YACE,QAAQ,QAAQ,MAAM;QACxB;QAGF,OAAO,oNAAY,CAAC,IAAI,CAAC;IAE3B,8DAA8D;IAC9D,EAAE,OAAO,OAAY;QACnB,OAAO,oNAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO;QAAC,GACvB;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}