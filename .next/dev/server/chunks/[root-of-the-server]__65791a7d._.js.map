{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking-git/email-tracking/lib/sanity.ts"],"sourcesContent":["import { createClient } from \"@sanity/client\";\n\nexport const sanity = createClient({\n  projectId: process.env.NEXT_PUBLIC_SANITY_PROJECT_ID!,\n  dataset: 'production',\n  apiVersion: '2024-01-01',\n  token: process.env.SANITY_API_TOKEN,\n  useCdn: false,\n})\n\n\n// async function deleteAllEmails() {\n//   try {\n//     // GROQ query to fetch all email _id's\n//     const emails = await sanity.fetch(`*[_type == \"emails\"]{_id}`);\n    \n//     // Delete all emails\n//     const deletePromises = emails.map((email: { _id: any; }) => sanity.delete(email._id));\n//     await Promise.all(deletePromises);\n\n//     console.log('All emails deleted successfully!');\n//   } catch (err) {\n//     console.error('Error deleting emails:', err);\n//   }\n// }\n\n// deleteAllEmails();\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,SAAS,IAAA,gMAAY,EAAC;IACjC,SAAS;IACT,SAAS;IACT,YAAY;IACZ,OAAO,QAAQ,GAAG,CAAC,gBAAgB;IACnC,QAAQ;AACV,GAGA,qCAAqC;CACrC,UAAU;CACV,6CAA6C;CAC7C,sEAAsE;CAEtE,2BAA2B;CAC3B,6FAA6F;CAC7F,yCAAyC;CAEzC,uDAAuD;CACvD,oBAAoB;CACpB,oDAAoD;CACpD,MAAM;CACN,IAAI;CAEJ,qBAAqB"}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///home/hp/Desktop/email-traking-git/email-tracking/app/api/templates/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { sanity } from \"@/lib/sanity\";\n\nexport async function GET(req: Request) {\n  try {\n    const { searchParams } = new URL(req.url);\n\n    const search = searchParams.get(\"search\") || \"\";\n    const page = Number(searchParams.get(\"page\") || 1);\n    const limit = Number(searchParams.get(\"limit\") || 6);\n\n    const start = (page - 1) * limit;\n    const end = start + limit;\n\n    const filter = search\n      ? `&& (title match $search || subject match $search)`\n      : \"\";\n\n    // ✅ Fetch Templates\n    const templates = await sanity.fetch(\n      `*[_type == \"emailTemplate\" ${filter}]\n        | order(_createdAt desc)[$start...$end]{\n          _id,\n          title,\n          subject,\n          body,\n          category\n        }`,\n      {\n        search: `${search}*`,\n        start,\n        end,\n      }\n    );\n\n    // ✅ Total Count\n    const total = await sanity.fetch(\n      `count(*[_type == \"emailTemplate\" ${filter}])`,\n      { search: `${search}*` }\n    );\n\n    return NextResponse.json({\n      data: templates,\n      total,\n      page,\n      totalPages: Math.ceil(total / limit),\n    });\n\n  } catch (error) {\n    console.error(error);\n\n    return NextResponse.json(\n      { error: \"Failed to fetch templates\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,IAAI,GAAY;IACpC,IAAI;QACF,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;QAExC,MAAM,SAAS,aAAa,GAAG,CAAC,aAAa;QAC7C,MAAM,OAAO,OAAO,aAAa,GAAG,CAAC,WAAW;QAChD,MAAM,QAAQ,OAAO,aAAa,GAAG,CAAC,YAAY;QAElD,MAAM,QAAQ,CAAC,OAAO,CAAC,IAAI;QAC3B,MAAM,MAAM,QAAQ;QAEpB,MAAM,SAAS,SACX,CAAC,iDAAiD,CAAC,GACnD;QAEJ,oBAAoB;QACpB,MAAM,YAAY,MAAM,yHAAM,CAAC,KAAK,CAClC,CAAC,2BAA2B,EAAE,OAAO;;;;;;;SAOlC,CAAC,EACJ;YACE,QAAQ,GAAG,OAAO,CAAC,CAAC;YACpB;YACA;QACF;QAGF,gBAAgB;QAChB,MAAM,QAAQ,MAAM,yHAAM,CAAC,KAAK,CAC9B,CAAC,iCAAiC,EAAE,OAAO,EAAE,CAAC,EAC9C;YAAE,QAAQ,GAAG,OAAO,CAAC,CAAC;QAAC;QAGzB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,MAAM;YACN;YACA;YACA,YAAY,KAAK,IAAI,CAAC,QAAQ;QAChC;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC;QAEd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA4B,GACrC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}