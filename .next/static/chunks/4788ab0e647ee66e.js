(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41221,e=>{"use strict";var t=e.i(44589),s=e.i(84576),l=e.i(92927),a=e.i(79697);function r(){let[e,r]=(0,s.useState)([]),[i,d]=(0,s.useState)(""),[c,n]=(0,s.useState)(1),[o,u]=(0,s.useState)(0),m=(0,l.useRouter)(),x=async()=>{try{let e=await fetch(`/api/templates?search=${i}&page=${c}&limit=9`),t=await e.json();r(Array.isArray(t.data)?t.data:[]),u(t.total||0)}catch(e){console.error("Template load error",e),r([])}};(0,s.useEffect)(()=>{x()},[i,c]);let p=async e=>{if((await a.default.fire({title:"Delete Template?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await fetch(`/api/templates/${e}`,{method:"DELETE"}),r(t=>t.filter(t=>t._id!==e)),a.default.fire("Deleted!","Template deleted.","success")}catch{a.default.fire("Error","Failed to delete template","error")}},h=Math.ceil(o/9);return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Email Templates"}),(0,t.jsx)("button",{onClick:()=>m.push("/crm/templates/create"),className:"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 cursor-pointer",children:"+ Create Template"})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("input",{type:"text",placeholder:"Search templates...",value:i,onChange:e=>{d(e.target.value),n(1)},className:"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"})}),0===e.length?(0,t.jsx)("div",{className:"bg-white p-10 rounded-xl shadow text-center",children:"No templates found"}):(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-indigo-50 rounded-xl shadow p-5 flex flex-col justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-indigo-700 mb-2",children:e.title}),e.category&&(0,t.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs px-3 py-1 rounded-full mb-3 inline-block",children:e.category}),(0,t.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:e.subject||"No subject"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-5",children:[(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>m.push(`/crm/templates/create?id=${e._id}`),className:"text-sm text-blue-600 border border-blue-600 px-3 py-1 rounded hover:bg-blue-600 hover:text-white transition cursor-pointer",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>p(e._id),className:"text-sm text-red-600 border border-red-600 px-3 py-1 rounded hover:bg-red-600 hover:text-white transition cursor-pointer",children:"Delete"})]}),(0,t.jsx)("button",{onClick:()=>m.push(`/crm/send?template=${e._id}`),className:"bg-gray-100 px-3 py-1 rounded hover:bg-gray-200 text-sm cursor-pointer",children:"Use In"})]})]},e._id))}),h>1&&(0,t.jsxs)("div",{className:"flex justify-center mt-8 gap-4",children:[(0,t.jsx)("button",{disabled:1===c,onClick:()=>n(c-1),className:"px-4 py-2 border rounded disabled:opacity-40",children:"Prev"}),(0,t.jsxs)("span",{className:"px-4 py-2",children:["Page ",c," of ",h]}),(0,t.jsx)("button",{disabled:c===h,onClick:()=>n(c+1),className:"px-4 py-2 border rounded disabled:opacity-40",children:"Next"})]})]})})}e.s(["default",()=>r])}]);