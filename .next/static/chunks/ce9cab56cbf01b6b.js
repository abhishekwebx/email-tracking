(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7187,e=>{"use strict";var t=e.i(44589),a=e.i(84576),l=e.i(89775),s=e.i(92927);function r(){let e=(0,s.useRouter)(),r=(0,s.useSearchParams)().get("id"),[i,n]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[h,x]=(0,a.useState)(!1),[b,g]=(0,a.useState)("");(0,a.useEffect)(()=>{r&&(async()=>{try{let e=await fetch(`/api/templates/${r}`),t=await e.json();if(!e.ok)throw Error(t.error);n(t.title||""),c(t.subject||""),m(t.body||""),p(t.category||"")}catch(e){g(e.message||"Failed to load template")}})()},[r]);let j=async()=>{if(g(""),!i||!o||!d)return void g("All fields are required");x(!0);try{let t=await fetch(r?`/api/templates/${r}`:"/api/templates/create",{method:r?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:i,subject:o,body:d,category:u})}),a=await t.json();if(!t.ok)throw Error(a.error);e.push("/crm/templates")}catch(e){g(e.message)}finally{x(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto bg-white shadow-lg rounded-xl p-8",children:[(0,t.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:r?"Edit Email Template":"Create Email Template"})}),b&&(0,t.jsx)("div",{className:"mb-4 bg-red-100 text-red-700 p-3 rounded",children:b}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Template Name"}),(0,t.jsx)("input",{className:"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none",value:i,placeholder:"Enter template name",onChange:e=>n(e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Category"}),(0,t.jsxs)("select",{className:"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none",value:u,onChange:e=>p(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Select Category"}),(0,t.jsx)("option",{value:"Proposal",children:"Proposal"}),(0,t.jsx)("option",{value:"Follow Up",children:"Follow Up"}),(0,t.jsx)("option",{value:"Reminder",children:"Reminder"}),(0,t.jsx)("option",{value:"Thank You",children:"Thank You"})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[(0,t.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Subject"}),(0,t.jsx)("input",{className:"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none",value:o,placeholder:"Enter email subject",onChange:e=>c(e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Email Content"}),(0,t.jsx)(l.default,{body:d,setBody:m})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,t.jsx)("button",{onClick:()=>e.push("/crm/templates"),className:"px-5 py-2 rounded-lg border hover:bg-gray-100",children:"Cancel"}),(0,t.jsx)("button",{onClick:j,disabled:h,className:"px-6 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition",children:h?r?"Updating...":"Saving...":r?"Update Template":"Save Template"})]})]})})}e.s(["default",()=>r])}]);