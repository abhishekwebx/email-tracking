(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31341,e=>{"use strict";var s=e.i(44589),a=e.i(84576),r=e.i(92927);function t(){let e=(0,r.useRouter)(),[t,l]=(0,a.useState)([]),[d,i]=(0,a.useState)([]),[c,o]=(0,a.useState)(!0),n=JSON.parse(localStorage.getItem("user")||"{}");return((0,a.useEffect)(()=>{"admin"!==n.role&&e.push("/crm/dashboard"),(async()=>{try{let e=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),s=await fetch("/api/admin/emails",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});l(await e.json()),i(await s.json())}catch(e){console.error(e)}finally{o(!1)}})()},[]),c)?(0,s.jsx)("p",{children:"Loading admin data..."}):(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto space-y-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Users"}),(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"p-2 border",children:"Name"}),(0,s.jsx)("th",{className:"p-2 border",children:"Email"}),(0,s.jsx)("th",{className:"p-2 border",children:"Role"}),(0,s.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:t.map(a=>(0,s.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,s.jsx)("td",{className:"p-2 border",children:a.name}),(0,s.jsx)("td",{className:"p-2 border",children:a.email}),(0,s.jsx)("td",{className:"p-2 border",children:a.role}),(0,s.jsxs)("td",{className:"p-2 border space-x-2",children:[(0,s.jsx)("button",{className:"px-3 py-1 bg-yellow-500 text-white rounded",onClick:()=>e.push(`/crm/admin/users/edit/${a._id}`),children:"Edit"}),(0,s.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:async()=>{confirm("Delete this user?")&&(await fetch(`/api/admin/users/${a._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),l(t.filter(e=>e._id!==a._id)))},children:"Delete"})]})]},a._id))})]})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Emails"}),(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"p-2 border",children:"To"}),(0,s.jsx)("th",{className:"p-2 border",children:"Subject"}),(0,s.jsx)("th",{className:"p-2 border",children:"Sender"}),(0,s.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:d.map(a=>(0,s.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,s.jsx)("td",{className:"p-2 border",children:a.to}),(0,s.jsx)("td",{className:"p-2 border",children:a.subject}),(0,s.jsx)("td",{className:"p-2 border",children:a.senderName}),(0,s.jsxs)("td",{className:"p-2 border space-x-2",children:[(0,s.jsx)("button",{className:"px-3 py-1 bg-yellow-500 text-white rounded",onClick:()=>e.push(`/send/${a._id}`),children:"Edit"}),(0,s.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:async()=>{confirm("Delete this email?")&&(await fetch(`/api/admin/emails/${a._id}`,{method:"DELETE"}),i(d.filter(e=>e._id!==a._id)))},children:"Delete"})]})]},a._id))})]})]})]})}e.s(["default",()=>t])}]);