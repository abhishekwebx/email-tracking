(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66701,e=>{"use strict";var t=e.i(44589),s=e.i(84576),a=e.i(92927),r=e.i(79697);function l(){let[e,l]=(0,s.useState)([]),i=(0,a.useRouter)(),n=async()=>{let e=await fetch("/api/getdraft");l(await e.json())};(0,s.useEffect)(()=>{n()},[]);let c=async e=>{if((await r.default.fire({title:"Delete Draft?",text:"You won't be able to recover this draft!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await fetch(`/api/draft/delete?id=${e}`,{method:"DELETE"}),r.default.fire({toast:!0,position:"top-end",icon:"success",title:"Draft deleted",showConfirmButton:!1,timer:2e3}),n()}catch{r.default.fire("Error","Failed to delete draft","error")}};return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Draft Emails"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Manage and edit your saved draft emails"})]}),(0,t.jsx)("div",{className:"bg-white shadow-lg rounded-2xl overflow-hidden border",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,t.jsxs)("tr",{className:"text-left text-sm text-gray-600",children:[(0,t.jsx)("th",{className:"p-4",children:"Subject"}),(0,t.jsx)("th",{className:"p-4",children:"Recipients"}),(0,t.jsx)("th",{className:"p-4 text-center",children:"Status"}),(0,t.jsx)("th",{className:"p-4 text-center",children:"Action"})]})}),(0,t.jsxs)("tbody",{children:[0===e.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"text-center py-12 text-gray-400",children:"No Draft Emails Found"})}),e.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition",children:[(0,t.jsx)("td",{className:"p-4 font-medium text-gray-800",children:e.subject||"No Subject"}),(0,t.jsx)("td",{className:"p-4 text-gray-600",children:e.to?.length>0?(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.to.slice(0,3).map(e=>(0,t.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full",children:e},e)),e.to.length>3&&(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:["+",e.to.length-3," more"]})]}):"-"}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-3 py-1 rounded-full",children:"Draft"})}),(0,t.jsxs)("td",{className:"p-4 text-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{i.push(`/crm/send/${e._id}`),sessionStorage.removeItem("route")},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-indigo-700 transition duration-300 ease-in-out transform hover:scale-105 cursor-pointer",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>c(e._id),className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700 transition duration-300 ease-in-out transform hover:scale-105 cursor-pointer",children:"Delete"})]})]},e._id))]})]})})]})}e.s(["default",()=>l])}]);