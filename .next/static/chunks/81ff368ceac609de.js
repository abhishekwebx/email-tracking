(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98663,e=>{"use strict";let t=(0,e.i(93096).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],98663)},35080,45113,e=>{"use strict";var t=e.i(44589),r=e.i(68802);function n({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...n})}function s({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...n})}e.s(["Card",()=>n,"CardContent",()=>s],35080);let l=(0,e.i(93096).default)("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);e.s(["MousePointerClick",()=>l],45113)},24071,e=>{"use strict";let t,r,n,s,l;var a=e.i(44589),i=e.i(84576);function o(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var d=Symbol.for("react.lazy"),c=i[" use ".trim().toString()];function u(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===d&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var m=((l=i.forwardRef((e,t)=>{let{children:r,...n}=e;if(u(r)&&"function"==typeof c&&(r=c(r._payload)),i.isValidElement(r)){var s;let e,l,a=(s=r,(l=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(l=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),d=function(e,t){let r={...t};for(let n in t){let s=e[n],l=t[n];/^on[A-Z]/.test(n)?s&&l?r[n]=(...e)=>{let t=l(...e);return s(...e),t}:s&&(r[n]=s):"style"===n?r[n]={...s,...l}:"className"===n&&(r[n]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==i.Fragment&&(d.ref=t?function(...e){return t=>{let r=!1,n=e.map(e=>{let n=o(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){let r=n[t];"function"==typeof r?r():o(e[t],null)}}}}(t,a):a),i.cloneElement(r,d)}return i.Children.count(r)>1?i.Children.only(null):null})).displayName="Slot.SlotClone",t=l,(r=i.forwardRef((e,r)=>{let{children:n,...s}=e;u(n)&&"function"==typeof c&&(n=c(n._payload));let l=i.Children.toArray(n),o=l.find(h);if(o){let e=o.props.children,n=l.map(t=>t!==o?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,a.jsx)(t,{...s,ref:r,children:i.isValidElement(e)?i.cloneElement(e,void 0,n):null})}return(0,a.jsx)(t,{...s,ref:r,children:n})})).displayName="Slot.Slot",r),x=Symbol("radix.slottable");function h(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===x}var p=e.i(3363);let f=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,g=p.clsx;var v=e.i(68802);let b=(n="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",primary:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==s?void 0:s.variants)==null)return g(n,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:r,defaultVariants:l}=s,a=Object.keys(r).map(t=>{let n=null==e?void 0:e[t],s=null==l?void 0:l[t];if(null===n)return null;let a=f(n)||f(s);return r[t][a]}),i=e&&Object.entries(e).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{});return g(n,a,null==s||null==(t=s.compoundVariants)?void 0:t.reduce((e,t)=>{let{class:r,className:n,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...i}[t]):({...l,...i})[t]===r})?[...e,r,n]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)});function y({className:e,variant:t="default",size:r="default",asChild:n=!1,...s}){return(0,a.jsx)(n?m:"button",{"data-slot":"button","data-variant":t,"data-size":r,className:(0,v.cn)(b({variant:t,size:r,className:e})),...s})}e.s(["Button",()=>y],24071)},90695,e=>{"use strict";var t=e.i(44589),r=e.i(84576),n=e.i(35080),s=e.i(98663),l=e.i(45113),a=e.i(67723),i=e.i(24071),o=e.i(92927),d=e.i(56262);function c(){let e=(0,o.useRouter)(),[n,c]=(0,r.useState)([]),[m,x]=(0,r.useState)(!0),[h,p]=(0,r.useState)(1),[f,g]=(0,r.useState)("all"),v=Math.ceil(n.length/10),b=n.slice((h-1)*10,10*h);return((0,r.useEffect)(()=>{(async()=>{x(!0);try{let e=await fetch(`http://localhost:3000/api/emails?filter=${f}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw Error(`HTTP error! Status: ${e.status}`);let t=await e.json();c(t),p(1)}catch(e){console.error("Error fetching emails:",e),c([])}finally{x(!1)}})(),sessionStorage.removeItem("route")},[f]),m)?(0,t.jsx)("div",{className:"flex h-[60vh] items-center justify-center text-xl font-semibold text-muted-foreground",children:"Loading dashboard..."}):(0,t.jsx)(d.default,{children:(0,t.jsxs)("main",{className:"p-4 md:p-10 max-w-7xl mx-auto space-y-8",children:[(0,t.jsxs)("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Email Tracking Dashboard"}),(0,t.jsx)(i.Button,{className:"rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 cursor-pointer",onClick:()=>{e.push("/crm/send")},children:"+ Send Email"})]}),(0,t.jsxs)("section",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsx)(u,{title:"Total Emails",value:n.length,icon:(0,t.jsx)(a.Mail,{}),gradient:"from-blue-500 to-indigo-500"}),(0,t.jsx)(u,{title:"Opened",value:n.filter(e=>e.opened).length,icon:(0,t.jsx)(s.Eye,{}),gradient:"from-green-500 to-emerald-500"}),(0,t.jsx)(u,{title:"Total Clicks",value:n.reduce((e,t)=>e+(t.clickCount||0),0),icon:(0,t.jsx)(l.MousePointerClick,{}),gradient:"from-pink-500 to-rose-500"})]}),(0,t.jsx)("div",{className:"flex gap-2",children:[{label:"All",value:"all"},{label:"Today",value:"today"},{label:"Last Week",value:"last_week"},{label:"Week",value:"week"},{label:"Month",value:"month"}].map(e=>(0,t.jsx)(i.Button,{size:"sm",variant:f===e.value?"primary":"outline",onClick:()=>{g(e.value),p(1)},className:"capitalize cursor-pointer",children:e.label},e.value))}),(0,t.jsx)("section",{className:"rounded-2xl border shadow-sm overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{className:"bg-muted/60",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"p-4 text-left",children:"Recipient"}),(0,t.jsx)("th",{className:"p-4 text-left",children:"Subject"}),(0,t.jsx)("th",{className:"p-4 text-center",children:"Status"}),(0,t.jsx)("th",{className:"p-4 text-center",children:"Sent At"}),(0,t.jsx)("th",{className:"p-4 text-center",children:"Clicks"}),(0,t.jsx)("th",{className:"p-4 text-center",children:"Action"})]})}),(0,t.jsxs)("tbody",{children:[b.map(r=>(0,t.jsxs)("tr",{className:"border-t hover:bg-muted/40",children:[(0,t.jsx)("td",{className:"p-4 font-medium",children:r.to.map(e=>e).join(", ")}),(0,t.jsx)("td",{className:"p-4",children:r.subject}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${r.opened?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:null!=r.opened?r.opened?"Opened":"Pending":r.status??""})}),(0,t.jsx)("td",{className:"p-4 text-center text-muted-foreground",children:new Date(r.sentAt).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}),(0,t.jsx)("td",{className:"p-4 text-center font-semibold",children:r.clickCount}),(0,t.jsx)("td",{className:"p-4 text-center",children:(0,t.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>{e.push(`/crm/send/${r._id}`),sessionStorage.setItem("route","/crm/dashboard")},className:"cursor-pointer",children:"View Details"})})]},r._id)),0===b.length&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"text-center p-10",children:"No emails found"})})]})]})})}),v>1&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Page ",h," of ",v]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.Button,{className:"cursor-pointer",variant:"outline",size:"sm",disabled:1===h,onClick:()=>p(e=>e-1),children:"Previous"}),(0,t.jsx)(i.Button,{className:"cursor-pointer",variant:"outline",size:"sm",disabled:h===v,onClick:()=>p(e=>e+1),children:"Next"})]})]})]})})}function u({title:e,value:r,icon:s,gradient:l}){return(0,t.jsx)(n.Card,{className:"rounded-2xl shadow-sm hover:shadow-md",children:(0,t.jsxs)(n.CardContent,{className:"p-6 flex items-center gap-4",children:[(0,t.jsx)("div",{className:`p-3 rounded-xl text-white bg-gradient-to-br ${l}`,children:s}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e}),(0,t.jsx)("p",{className:"text-2xl font-bold",children:r})]})]})})}e.s(["default",()=>c])}]);