{"version":3,"sources":["../../../../../../../Desktop/email-traking%20sainty/email-tracking-next/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../../../../Desktop/email-traking%20sainty/email-tracking-next/app/crm/templates/create/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport SimpleEmailEditor from \"../../send/emailEditor\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\n\nexport default function TemplateEditor() {\n  const router = useRouter();\n  const params = useSearchParams();\n\n  const templateId = params.get(\"id\");\n\n  const [title, setTitle] = useState(\"\");\n  const [subject, setSubject] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  /* =====================\n     LOAD TEMPLATE (EDIT)\n  ====================== */\n  useEffect(() => {\n    if (!templateId) return;\n\n    const loadTemplate = async () => {\n      try {\n        const res = await fetch(`/api/templates/${templateId}`);\n        const data = await res.json();\n\n        if (!res.ok) throw new Error(data.error);\n\n        setTitle(data.title || \"\");\n        setSubject(data.subject || \"\");\n        setBody(data.body || \"\");\n        setCategory(data.category || \"\");\n      } catch (err: any) {\n        setError(err.message || \"Failed to load template\");\n      }\n    };\n\n    loadTemplate();\n  }, [templateId]);\n\n  /* =====================\n     SAVE TEMPLATE\n     (CREATE + UPDATE)\n  ====================== */\nconst saveTemplate = async () => {\n  setError(\"\");\n\n  if (!title || !subject || !body) {\n    setError(\"All fields are required\");\n    return;\n  }\n\n  setLoading(true);\n\n  try {\n    const payload = { title, subject, body, category };\n\n    const res = await fetch(\n      templateId\n        ? `/api/templates/${templateId}`\n        : `/api/templates/create`,\n      {\n        method: templateId ? \"PUT\" : \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      }\n    );\n\n    const data = await res.json();\n    if (!res.ok) throw new Error(data.error);\n\n    router.push(\"/crm/templates\");\n  } catch (err: any) {\n    setError(err.message);\n  } finally {\n    setLoading(false);\n  }\n};\n\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 p-6\">\n      <div className=\"max-w-5xl mx-auto bg-white shadow-lg rounded-xl p-8\">\n\n        {/* HEADER */}\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-2xl font-semibold text-gray-800\">\n            {templateId ? \"Edit Email Template\" : \"Create Email Template\"}\n          </h1>\n        </div>\n\n        {/* ERROR */}\n        {error && (\n          <div className=\"mb-4 bg-red-100 text-red-700 p-3 rounded\">\n            {error}\n          </div>\n        )}\n\n        {/* TEMPLATE NAME */}\n        <div className=\"mb-5\">\n          <label className=\"block mb-2 text-sm font-medium text-gray-700\">\n            Template Name\n          </label>\n          <input\n            className=\"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none\"\n            value={title}\n            placeholder=\"Enter template name\"\n            onChange={(e) => setTitle(e.target.value)}\n          />\n        </div>\n\n        {/* CATEGORY */}\n        <div className=\"mb-5\">\n          <label className=\"block mb-2 text-sm font-medium text-gray-700\">\n            Category\n          </label>\n\n          <select\n            className=\"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none\"\n            value={category}\n            onChange={(e) => setCategory(e.target.value)}\n          >\n            <option value=\"\">Select Category</option>\n            <option value=\"Proposal\">Proposal</option>\n            <option value=\"Follow Up\">Follow Up</option>\n            <option value=\"Reminder\">Reminder</option>\n            <option value=\"Thank You\">Thank You</option>\n          </select>\n        </div>\n\n        {/* SUBJECT */}\n        <div className=\"mb-5\">\n          <label className=\"block mb-2 text-sm font-medium text-gray-700\">\n            Subject\n          </label>\n          <input\n            className=\"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 outline-none\"\n            value={subject}\n            placeholder=\"Enter email subject\"\n            onChange={(e) => setSubject(e.target.value)}\n          />\n        </div>\n\n        {/* EMAIL EDITOR */}\n        <div className=\"mb-6\">\n          <label className=\"block mb-2 text-sm font-medium text-gray-700\">\n            Email Content\n          </label>\n\n          <SimpleEmailEditor body={body} setBody={setBody} />\n        </div>\n\n        {/* ACTION BUTTONS */}\n        <div className=\"flex justify-end gap-4\">\n          <button\n            onClick={() => router.push(\"/crm/templates\")}\n            className=\"px-5 py-2 rounded-lg border hover:bg-gray-100\"\n          >\n            Cancel\n          </button>\n\n          <button\n            onClick={saveTemplate}\n            disabled={loading}\n            className=\"px-6 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition\"\n          >\n            {loading\n              ? templateId\n                ? \"Updating...\"\n                : \"Saving...\"\n              : templateId\n              ? \"Update Template\"\n              : \"Save Template\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["module","exports","require","vendored","ReactDOM"],"mappings":"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","ignoreList":[0]}