module.exports=[18734,a=>{"use strict";var b=a.i(21695),c=a.i(18599),d=a.i(51835),e=a.i(35249);function f(){let[a,f]=(0,c.useState)([]),g=(0,d.useRouter)(),h=async()=>{let a=await fetch("/api/getdraft");f(await a.json())};(0,c.useEffect)(()=>{h()},[]);let i=async a=>{if((await e.default.fire({title:"Delete Draft?",text:"You won't be able to recover this draft!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc2626",cancelButtonColor:"#6b7280",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await fetch(`/api/draft/delete?id=${a}`,{method:"DELETE"}),e.default.fire({toast:!0,position:"top-end",icon:"success",title:"Draft deleted",showConfirmButton:!1,timer:2e3}),h()}catch{e.default.fire("Error","Failed to delete draft","error")}};return(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Draft Emails"}),(0,b.jsx)("p",{className:"text-gray-500 text-sm",children:"Manage and edit your saved draft emails"})]}),(0,b.jsx)("div",{className:"bg-white shadow-lg rounded-2xl overflow-hidden border",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,b.jsxs)("tr",{className:"text-left text-sm text-gray-600",children:[(0,b.jsx)("th",{className:"p-4",children:"Subject"}),(0,b.jsx)("th",{className:"p-4",children:"Recipients"}),(0,b.jsx)("th",{className:"p-4 text-center",children:"Status"}),(0,b.jsx)("th",{className:"p-4 text-center",children:"Action"})]})}),(0,b.jsxs)("tbody",{children:[0===a.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"text-center py-12 text-gray-400",children:"No Draft Emails Found"})}),a.map(a=>(0,b.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition",children:[(0,b.jsx)("td",{className:"p-4 font-medium text-gray-800",children:a.subject||"No Subject"}),(0,b.jsx)("td",{className:"p-4 text-gray-600",children:a.to?.length>0?(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.to.slice(0,3).map(a=>(0,b.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full",children:a},a)),a.to.length>3&&(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:["+",a.to.length-3," more"]})]}):"-"}),(0,b.jsx)("td",{className:"p-4 text-center",children:(0,b.jsx)("span",{className:"bg-yellow-100 text-yellow-700 text-xs px-3 py-1 rounded-full",children:"Draft"})}),(0,b.jsxs)("td",{className:"p-4 text-center space-x-2",children:[(0,b.jsx)("button",{onClick:()=>{g.push(`/crm/send/${a._id}`),sessionStorage.removeItem("route")},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-indigo-700 transition duration-300 ease-in-out transform hover:scale-105 cursor-pointer",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>i(a._id),className:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700 transition duration-300 ease-in-out transform hover:scale-105 cursor-pointer",children:"Delete"})]})]},a._id))]})]})})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=3d860_email-traking%20sainty_email-tracking-next_app_crm_draft-mail_page_tsx_e9f827d3._.js.map