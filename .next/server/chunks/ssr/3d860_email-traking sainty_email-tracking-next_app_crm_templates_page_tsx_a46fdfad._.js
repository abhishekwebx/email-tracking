module.exports=[64022,a=>{"use strict";var b=a.i(21695),c=a.i(18599),d=a.i(51835),e=a.i(35249);function f(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(1),[k,l]=(0,c.useState)(0),m=(0,d.useRouter)(),n=async()=>{try{let a=await fetch(`/api/templates?search=${g}&page=${i}&limit=9`),b=await a.json();f(Array.isArray(b.data)?b.data:[]),l(b.total||0)}catch(a){console.error("Template load error",a),f([])}};(0,c.useEffect)(()=>{n()},[g,i]);let o=async a=>{if((await e.default.fire({title:"Delete Template?",text:"This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"})).isConfirmed)try{await fetch(`/api/templates/${a}`,{method:"DELETE"}),f(b=>b.filter(b=>b._id!==a)),e.default.fire("Deleted!","Template deleted.","success")}catch{e.default.fire("Error","Failed to delete template","error")}},p=Math.ceil(k/9);return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Email Templates"}),(0,b.jsx)("button",{onClick:()=>m.push("/crm/templates/create"),className:"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 cursor-pointer",children:"+ Create Template"})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("input",{type:"text",placeholder:"Search templates...",value:g,onChange:a=>{h(a.target.value),j(1)},className:"w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"})}),0===a.length?(0,b.jsx)("div",{className:"bg-white p-10 rounded-xl shadow text-center",children:"No templates found"}):(0,b.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(a=>(0,b.jsxs)("div",{className:"bg-indigo-50 rounded-xl shadow p-5 flex flex-col justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-indigo-700 mb-2",children:a.title}),a.category&&(0,b.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs px-3 py-1 rounded-full mb-3 inline-block",children:a.category}),(0,b.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:a.subject||"No subject"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-5",children:[(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:()=>m.push(`/crm/templates/create?id=${a._id}`),className:"text-sm text-blue-600 border border-blue-600 px-3 py-1 rounded hover:bg-blue-600 hover:text-white transition cursor-pointer",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>o(a._id),className:"text-sm text-red-600 border border-red-600 px-3 py-1 rounded hover:bg-red-600 hover:text-white transition cursor-pointer",children:"Delete"})]}),(0,b.jsx)("button",{onClick:()=>m.push(`/crm/send?template=${a._id}`),className:"bg-gray-100 px-3 py-1 rounded hover:bg-gray-200 text-sm cursor-pointer",children:"Use In"})]})]},a._id))}),p>1&&(0,b.jsxs)("div",{className:"flex justify-center mt-8 gap-4",children:[(0,b.jsx)("button",{disabled:1===i,onClick:()=>j(i-1),className:"px-4 py-2 border rounded disabled:opacity-40",children:"Prev"}),(0,b.jsxs)("span",{className:"px-4 py-2",children:["Page ",i," of ",p]}),(0,b.jsx)("button",{disabled:i===p,onClick:()=>j(i+1),className:"px-4 py-2 border rounded disabled:opacity-40",children:"Next"})]})]})})}a.s(["default",()=>f])}];

//# sourceMappingURL=3d860_email-traking%20sainty_email-tracking-next_app_crm_templates_page_tsx_a46fdfad._.js.map