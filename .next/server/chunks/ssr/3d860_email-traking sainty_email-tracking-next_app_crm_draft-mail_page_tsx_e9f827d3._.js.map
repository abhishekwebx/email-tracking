{"version":3,"sources":["../../../../../../../Desktop/email-traking%20sainty/email-tracking-next/app/crm/draft-mail/page.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Swal from \"sweetalert2\";\n\nexport default function DraftList() {\n  const [drafts, setDrafts] = useState<any[]>([]);\n  const router = useRouter();\n\n  const loadDrafts = async () => {\n    const res = await fetch(\"/api/getdraft\");\n    const data = await res.json();\n    setDrafts(data);\n  };\n\n  useEffect(() => {\n    loadDrafts();\n  }, []);\n\n  /* =====================\n     DELETE DRAFT\n  ====================== */\n  const deleteDraft = async (id: string) => {\n    const result = await Swal.fire({\n      title: \"Delete Draft?\",\n      text: \"You won't be able to recover this draft!\",\n      icon: \"warning\",\n      showCancelButton: true,\n      confirmButtonColor: \"#dc2626\",\n      cancelButtonColor: \"#6b7280\",\n      confirmButtonText: \"Yes, delete it!\",\n    });\n\n    if (!result.isConfirmed) return;\n\n    try {\n      await fetch(`/api/draft/delete?id=${id}`, {\n        method: \"DELETE\",\n      });\n\n      Swal.fire({\n        toast: true,\n        position: \"top-end\",\n        icon: \"success\",\n        title: \"Draft deleted\",\n        showConfirmButton: false,\n        timer: 2000,\n      });\n\n      loadDrafts();\n    } catch {\n      Swal.fire(\"Error\", \"Failed to delete draft\", \"error\");\n    }\n  };\n\n  return (\n    <div className=\"p-6\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <h2 className=\"text-2xl font-bold text-gray-800\">Draft Emails</h2>\n        <p className=\"text-gray-500 text-sm\">\n          Manage and edit your saved draft emails\n        </p>\n      </div>\n\n      {/* Card */}\n      <div className=\"bg-white shadow-lg rounded-2xl overflow-hidden border\">\n        <table className=\"w-full\">\n          <thead className=\"bg-gray-50 border-b\">\n            <tr className=\"text-left text-sm text-gray-600\">\n              <th className=\"p-4\">Subject</th>\n              <th className=\"p-4\">Recipients</th>\n              <th className=\"p-4 text-center\">Status</th>\n              <th className=\"p-4 text-center\">Action</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {drafts.length === 0 && (\n              <tr>\n                <td colSpan={4} className=\"text-center py-12 text-gray-400\">\n                  No Draft Emails Found\n                </td>\n              </tr>\n            )}\n\n            {drafts.map((d: any) => (\n              <tr key={d._id} className=\"border-b hover:bg-gray-50 transition\">\n                {/* Subject */}\n                <td className=\"p-4 font-medium text-gray-800\">\n                  {d.subject || \"No Subject\"}\n                </td>\n\n                {/* Recipients */}\n                <td className=\"p-4 text-gray-600\">\n                  {d.to?.length > 0 ? (\n                    <div className=\"flex flex-wrap gap-2\">\n                      {d.to.slice(0, 3).map((email: string) => (\n                        <span\n                          key={email}\n                          className=\"bg-blue-100 text-blue-700 text-xs px-2 py-1 rounded-full\"\n                        >\n                          {email}\n                        </span>\n                      ))}\n\n                      {d.to.length > 3 && (\n                        <span className=\"text-xs text-gray-400\">\n                          +{d.to.length - 3} more\n                        </span>\n                      )}\n                    </div>\n                  ) : (\n                    \"-\"\n                  )}\n                </td>\n\n                {/* Status */}\n                <td className=\"p-4 text-center\">\n                  <span className=\"bg-yellow-100 text-yellow-700 text-xs px-3 py-1 rounded-full\">\n                    Draft\n                  </span>\n                </td>\n\n                {/* Actions */}\n                <td className=\"p-4 text-center space-x-2\">\n                  <button\n                    onClick={() => {\n                      router.push(`/crm/send/${d._id}`);\n                      sessionStorage.removeItem(\"route\");\n                    }}\n                    className=\"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-indigo-700 transition duration-300 ease-in-out transform hover:scale-105 cursor-pointer\"\n                  >\n                    Edit\n                  </button>\n\n                  <button\n                    onClick={() => deleteDraft(d._id)}\n                    className=\"bg-red-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-red-700 transition duration-300 ease-in-out transform hover:scale-105 cursor-pointer\"\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}