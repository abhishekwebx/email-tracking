module.exports=[51746,a=>{"use strict";var b=a.i(21695),c=a.i(18599),d=a.i(51835);function e(){let a=(0,d.useRouter)(),[e,f]=(0,c.useState)([]),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),k=JSON.parse(localStorage.getItem("user")||"{}");return((0,c.useEffect)(()=>{"admin"!==k.role&&a.push("/crm/dashboard"),(async()=>{try{let a=await fetch("/api/admin/users",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),b=await fetch("/api/admin/emails",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});f(await a.json()),h(await b.json())}catch(a){console.error(a)}finally{j(!1)}})()},[]),i)?(0,b.jsx)("p",{children:"Loading admin data..."}):(0,b.jsxs)("div",{className:"p-6 max-w-7xl mx-auto space-y-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Users"}),(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-200",children:[(0,b.jsx)("th",{className:"p-2 border",children:"Name"}),(0,b.jsx)("th",{className:"p-2 border",children:"Email"}),(0,b.jsx)("th",{className:"p-2 border",children:"Role"}),(0,b.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:e.map(c=>(0,b.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,b.jsx)("td",{className:"p-2 border",children:c.name}),(0,b.jsx)("td",{className:"p-2 border",children:c.email}),(0,b.jsx)("td",{className:"p-2 border",children:c.role}),(0,b.jsxs)("td",{className:"p-2 border space-x-2",children:[(0,b.jsx)("button",{className:"px-3 py-1 bg-yellow-500 text-white rounded",onClick:()=>a.push(`/crm/admin/users/edit/${c._id}`),children:"Edit"}),(0,b.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:async()=>{confirm("Delete this user?")&&(await fetch(`/api/admin/users/${c._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),f(e.filter(a=>a._id!==c._id)))},children:"Delete"})]})]},c._id))})]})]}),(0,b.jsxs)("section",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Emails"}),(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-200",children:[(0,b.jsx)("th",{className:"p-2 border",children:"To"}),(0,b.jsx)("th",{className:"p-2 border",children:"Subject"}),(0,b.jsx)("th",{className:"p-2 border",children:"Sender"}),(0,b.jsx)("th",{className:"p-2 border",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:g.map(c=>(0,b.jsxs)("tr",{className:"hover:bg-gray-100",children:[(0,b.jsx)("td",{className:"p-2 border",children:c.to}),(0,b.jsx)("td",{className:"p-2 border",children:c.subject}),(0,b.jsx)("td",{className:"p-2 border",children:c.senderName}),(0,b.jsxs)("td",{className:"p-2 border space-x-2",children:[(0,b.jsx)("button",{className:"px-3 py-1 bg-yellow-500 text-white rounded",onClick:()=>a.push(`/send/${c._id}`),children:"Edit"}),(0,b.jsx)("button",{className:"px-3 py-1 bg-red-600 text-white rounded",onClick:async()=>{confirm("Delete this email?")&&(await fetch(`/api/admin/emails/${c._id}`,{method:"DELETE"}),h(g.filter(a=>a._id!==c._id)))},children:"Delete"})]})]},c._id))})]})]})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=Desktop_email-traking%20sainty_email-tracking-next_app_crm_admin_page_tsx_a9fdfee7._.js.map